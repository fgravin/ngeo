(function(){var f=this;function aa(a,b){var c=a.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function g(a){return void 0!==a}function ba(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ca=Date.now||function(){return+new Date};
function h(a,b){function c(){}c.prototype=b.prototype;a.i=b.prototype;a.prototype=new c;a.g=function(a,c,k){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function l(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function m(a,b){return a<b?-1:a>b?1:0};var n=Array.prototype,p=n.forEach?function(a,b,c){n.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e="string"==typeof a?a.split(""):a,k=0;k<d;k++)k in e&&b.call(c,e[k],k,a)},da=n.map?function(a,b,c){return n.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),k="string"==typeof a?a.split(""):a,v=0;v<d;v++)v in k&&(e[v]=b.call(c,k[v],v,a));return e};var q,r,s,t;function ea(){return f.navigator?f.navigator.userAgent:null}t=s=r=q=!1;var u;if(u=ea()){var fa=f.navigator;q=0==u.lastIndexOf("Opera",0);r=!q&&(-1!=u.indexOf("MSIE")||-1!=u.indexOf("Trident"));s=!q&&-1!=u.indexOf("WebKit");t=!q&&!s&&!r&&"Gecko"==fa.product}var ga=q,w=r,x=t,y=s;function ha(){var a=f.document;return a?a.documentMode:void 0}var z;
a:{var A="",B;if(ga&&f.opera)var C=f.opera.version,A="function"==typeof C?C():C;else if(x?B=/rv\:([^\);]+)(\)|;)/:w?B=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:y&&(B=/WebKit\/(\S+)/),B)var ia=B.exec(ea()),A=ia?ia[1]:"";if(w){var ka=ha();if(ka>parseFloat(A)){z=String(ka);break a}}z=A}var la={};
function D(a){var b;if(!(b=la[a])){b=0;for(var c=l(String(z)).split("."),d=l(String(a)).split("."),e=Math.max(c.length,d.length),k=0;0==b&&k<e;k++){var v=c[k]||"",ja=d[k]||"",Ea=RegExp("(\\d*)(\\D*)","g"),Fa=RegExp("(\\d*)(\\D*)","g");do{var H=Ea.exec(v)||["","",""],I=Fa.exec(ja)||["","",""];if(0==H[0].length&&0==I[0].length)break;b=m(0==H[1].length?0:parseInt(H[1],10),0==I[1].length?0:parseInt(I[1],10))||m(0==H[2].length,0==I[2].length)||m(H[2],I[2])}while(0==b)}b=la[a]=0<=b}return b}
var ma=f.document,na=ma&&w?ha()||("CSS1Compat"==ma.compatMode?parseInt(z,10):5):void 0;!x&&!w||w&&w&&9<=na||x&&D("1.9.1");w&&D("9");function E(a,b){return b in a?a[b]:void 0}function oa(a,b){var c=[];return b in a?a[b]:a[b]=c};w&&D("9");!y||D("528");x&&D("1.9b")||w&&D("8")||ga&&D("9.5")||y&&D("528");x&&!D("8")||w&&D("9");w&&D("9.0");function F(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}F.prototype.a=4;F.prototype.d=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};F.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(F.BYTES_PER_ELEMENT=4,F.prototype.BYTES_PER_ELEMENT=F.prototype.a,F.prototype.set=F.prototype.d,F.prototype.toString=F.prototype.toString,aa("Float32Array",F));function G(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}G.prototype.a=8;G.prototype.d=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};G.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{G.BYTES_PER_ELEMENT=8}catch(pa){}G.prototype.BYTES_PER_ELEMENT=G.prototype.a;G.prototype.set=G.prototype.d;G.prototype.toString=G.prototype.toString;aa("Float64Array",G)};new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);var qa=["experimental-webgl","webgl","webkit-3d","moz-webgl"];(function(){if(!("HTMLCanvasElement"in f))return!1;try{var a=document.createElement("CANVAS");g(void 0)&&(a.width=void 0);g(void 0)&&(a.height=void 0);return null===a.getContext("2d")?!1:!0}catch(b){return!1}})();(function(){if(!("WebGLRenderingContext"in f))return!1;try{var a;a:{var b=document.createElement("CANVAS"),c={h:!0},d,e,k=qa.length;for(e=0;e<k;++e)try{if(d=b.getContext(qa[e],c),null!==d){a=d;break a}}catch(v){}a=null}return null!==a}catch(ja){return!1}})();/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licenced under CC-BY-3.0.
*/
function ra(a){this.a=a.code}var J={};function sa(a){ta(a);p(a,function(b){p(a,function(a){b!==a&&K(b,a,ua)})})}function ta(a){p(a,function(a){K(a,a,ua)})}function K(a,b,c){a=a.a;b=b.a;a in J||(J[a]={});J[a][b]=c}function ua(a,b){var c;if(g(b)){c=0;for(var d=a.length;c<d;++c)b[c]=a[c];c=b}else c=a.slice();return c};try{new MouseEvent("click",{buttons:1})}catch(va){};a:if(!document.implementation||!document.implementation.createDocument){if("undefined"!=typeof ActiveXObject){var L=new ActiveXObject("MSXML2.DOMDocument");if(L){L.resolveExternals=!1;L.validateOnParse=!1;try{L.setProperty("ProhibitDTD",!0),L.setProperty("MaxXMLSize",2048),L.setProperty("MaxElementDepth",256)}catch(wa){}}if(L)break a}throw Error("Your browser does not support creating new documents");}
function M(a,b,c){if(4==a.nodeType||3==a.nodeType)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;null!==a;a=a.nextSibling)M(a,b,c);return c}function xa(a){return a instanceof Document}function ya(a){return ba(a)&&9==a.nodeType}var za=w?ya:xa;function Aa(a){return a instanceof Node}function Ba(a){return ba(a)&&g(a.nodeType)}var Ca=w?Ba:Aa;function Da(){var a=N;return function(b,c){var d=a.call(void 0,b,c);g(d)&&c[c.length-1].push(d)}}
function O(a){return function(b,c){var d=a.call(void 0,b,c);g(d)&&oa(c[c.length-1],g(void 0)?void 0:b.localName).push(d)}}function P(a){return function(b,c){var d=a.call(void 0,b,c);g(d)&&(c[c.length-1][g(void 0)?void 0:b.localName]=d)}}function Q(a){var b=Ga,c=g(void 0)?void 0:{},d,e;d=0;for(e=b.length;d<e;++d)c[b[d]]=a;return c}
function R(a,b,c,d){d.push(a);for(a=c.firstElementChild;null!==a;a=a.nextElementSibling)c=b[a.namespaceURI],g(c)&&(c=c[a.localName],g(c)&&c.call(void 0,a,d));return d.pop()};function S(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return g(a[1])||!1}function T(a){a=M(a,!1,[]).join("");return U(a)}function U(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function V(a){a=M(a,!1,[]).join("");return W(a)}function W(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function N(a){a=M(a,!1,[]).join("");return l(a)};function X(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function Ha(){}function Ia(a){var b=new Ja;return za(a)?Ka(b,a):Ca(a)?La(b,a):"string"==typeof a?(a=(new DOMParser).parseFromString(a,"application/xml"),Ka(b,a)):null};function Ja(){this.version=void 0}h(Ja,Ha);function Ka(a,b){for(var c=b.firstChild;null!==c;c=c.nextSibling)if(1==c.nodeType)return La(a,c);return null}function La(a,b){a.version=l(b.getAttribute("version"));var c=R({version:a.version},Ma,b,[]);return g(c)?c:null}function Y(a,b){return R({},Na,a,b)}function Z(a,b){return R({},Oa,a,b)}function Pa(a,b){var c=Y(a,b);if(g(c)){var d=[W(a.getAttribute("width")),W(a.getAttribute("height"))];c.size=d;return c}}function Qa(a,b){return R([],Ra,a,b)}
var Ga=[null,"http://www.opengis.net/wms"],Ma=Q({Service:P(function(a,b){return R({},Sa,a,b)}),Capability:P(function(a,b){return R({},Ta,a,b)})}),Ta=Q({Request:P(function(a,b){return R({},Ua,a,b)}),Exception:P(function(a,b){return R([],Va,a,b)}),Layer:P(function(a,b){return R({},Wa,a,b)})}),Sa=Q({Name:P(N),Title:P(N),Abstract:P(N),KeywordList:P(Qa),OnlineResource:P(X),ContactInformation:P(function(a,b){return R({},Xa,a,b)}),Fees:P(N),AccessConstraints:P(N),LayerLimit:P(V),MaxWidth:P(V),MaxHeight:P(V)}),
Xa=Q({ContactPersonPrimary:P(function(a,b){return R({},Ya,a,b)}),ContactPosition:P(N),ContactAddress:P(function(a,b){return R({},Za,a,b)}),ContactVoiceTelephone:P(N),ContactFacsimileTelephone:P(N),ContactElectronicMailAddress:P(N)}),Ya=Q({ContactPerson:P(N),ContactOrganization:P(N)}),Za=Q({AddressType:P(N),Address:P(N),City:P(N),StateOrProvince:P(N),PostCode:P(N),Country:P(N)}),Va=Q({Format:Da()}),Wa=Q({Name:P(N),Title:P(N),Abstract:P(N),KeywordList:P(Qa),CRS:O(N),EX_GeographicBoundingBox:P(function(a,
b){var c=R({},$a,a,b);if(g(c)){var d=E(c,"westBoundLongitude"),e=E(c,"southBoundLatitude"),k=E(c,"eastBoundLongitude"),c=E(c,"northBoundLatitude");return g(d)&&g(e)&&g(k)&&g(c)?[d,e,k,c]:void 0}}),BoundingBox:O(function(a){var b=[U(a.getAttribute("minx")),U(a.getAttribute("miny")),U(a.getAttribute("maxx")),U(a.getAttribute("maxy"))],c=[U(a.getAttribute("resx")),U(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:O(function(a){return{name:a.getAttribute("name"),
units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:S(a.getAttribute("multipleValues")),nearestValue:S(a.getAttribute("nearestValue")),current:S(a.getAttribute("current")),values:N(a)}}),Attribution:P(function(a,b){return R({},ab,a,b)}),AuthorityURL:O(function(a,b){var c=Y(a,b);if(g(c)){var d=a.getAttribute("name");c.name=d;return c}}),Identifier:O(N),MetadataURL:O(function(a,b){var c=Y(a,b);if(g(c)){var d=a.getAttribute("type");
c.type=d;return c}}),DataURL:O(Y),FeatureListURL:O(Y),Style:O(function(a,b){return R({},bb,a,b)}),MinScaleDenominator:P(T),MaxScaleDenominator:P(T),Layer:O(function(a,b){var c=b[b.length-1],d=R({},Wa,a,b);if(g(d)){var e=S(a.getAttribute("queryable"));g(e)||(e=E(c,"queryable"));d.queryable=g(e)?e:!1;e=W(a.getAttribute("cascaded"));g(e)||(e=E(c,"cascaded"));d.cascaded=e;e=S(a.getAttribute("opaque"));g(e)||(e=E(c,"opaque"));d.opaque=g(e)?e:!1;e=S(a.getAttribute("noSubsets"));g(e)||(e=E(c,"noSubsets"));
d.noSubsets=g(e)?e:!1;e=U(a.getAttribute("fixedWidth"));g(e)||(e=E(c,"fixedWidth"));d.fixedWidth=e;e=U(a.getAttribute("fixedHeight"));g(e)||(e=E(c,"fixedHeight"));d.fixedHeight=e;p(["Style","CRS","AuthorityURL"],function(a){g(E(c,a))&&oa(d,a)});p("EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" "),function(a){g(E(d,a))||(d[a]=E(c,a))});return d}})}),ab=Q({Title:P(N),OnlineResource:P(X),LogoURL:P(Pa)}),$a=Q({westBoundLongitude:P(T),eastBoundLongitude:P(T),
southBoundLatitude:P(T),northBoundLatitude:P(T)}),Ua=Q({GetCapabilities:P(Z),GetMap:P(Z),GetFeatureInfo:P(Z)}),Oa=Q({Format:O(N),DCPType:O(function(a,b){return R({},cb,a,b)})}),cb=Q({HTTP:P(function(a,b){return R({},db,a,b)})}),db=Q({Get:P(Y),Post:P(Y)}),bb=Q({Name:P(N),Title:P(N),Abstract:P(N),LegendURL:O(Pa),StyleSheetURL:P(Y),StyleURL:P(Y)}),Na=Q({Format:P(N),OnlineResource:P(X)}),Ra=Q({Keyword:Da()});function eb(){this.a=ca()}new eb;eb.prototype.get=function(){return this.a};w||y&&D("525");function fb(a){this.a=a}h(fb,ra);var gb=da("EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" "),function(a){return new fb(a)});function hb(a,b,c){var d=a.length;c=1<c?c:2;g(b)||(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=6378137*Math.PI*a[e]/180,b[e+1]=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));return b}
function ib(a,b,c){var d=a.length;c=1<c?c:2;g(b)||(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/(6378137*Math.PI),b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};function $(a){this.a=a}h($,ra);var jb=[new $("CRS:84"),new $("EPSG:4326"),new $("urn:ogc:def:crs:EPSG:6.6:4326"),new $("urn:ogc:def:crs:OGC:1.3:CRS84"),new $("urn:ogc:def:crs:OGC:2:84"),new $("http://www.opengis.net/gml/srs/epsg.xml#4326"),new $("urn:x-ogc:def:crs:EPSG:4326")];sa(gb);sa(jb);p(jb,function(a){p(gb,function(b){K(a,b,hb);K(b,a,ib)})});var kb=angular.module("go",[]);kb.value("goConfig",{f:""});kb.service("goOws",["goConfig","goUrlUtils","$http","$q","$log",function(a,b,c,d,e){function k(a){try{var b=Ia(a);a=[];if(g(b.c)&&g(b.c.b)&&g(b.c.b.b))for(var c=0,d=b.c.b.b.length-1;c<d;c++)a.push(b.c.b.b[c]);return a}catch(k){e.error("Error parsing WMSCapabilities")}}this.e=function(){var a=d.defer();c.get("resources/wmscapabilities_1-3-0_geoserver.xml").success(function(b){a.resolve(k(b))}).error(function(b,c){a.reject(c)});return a.promise}}]);kb.service("goUrlUtils",[function(){}]);angular.module("app",["go"]).controller("MainController",["$scope","goOws","goConfig",function(a,b,c){c.f="";b.e().then(function(b){a.layers=b})}]);})();
